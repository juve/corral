<?xml version="1.0" encoding="UTF-8"?>
<jndiConfig xmlns="http://wsrf.globus.org/jndi/config">

	<global>
		<!-- Use an SQLite database												-->
        <!-- 																    -->
        <!-- Parameters:														-->
        <!-- 	databaseFile	- Path to the SQLite database file				-->
        <!-- 	autoInstall		- Should we allow the database to install 		-->
        <!--					  itself automatically?							-->
       	<!-- 	schemaFile	- The path to the database creation script			-->
		<resource name="glidein/Database"
				  type="edu.usc.glidein.service.db.sqlite.SQLiteDatabase">
            <resourceParams>
                <parameter>
                    <name>factory</name>
                    <value>org.globus.wsrf.jndi.BeanFactory</value>
                </parameter>
                <parameter>
                    <name>databaseFile</name>
                    <value>var/glidein_service/glidein.db</value>
                </parameter>
                <parameter>
                	<name>autoInstall</name>
                	<value>true</value>
                </parameter>
                <parameter>
                	<name>schemaFile</name>
                	<value>share/schema/glidein/sqlite.sql</value>
                </parameter>
            </resourceParams>
        </resource>
        <!-- Use a MySQL database                                               -->
        <!-- 																    -->
        <!-- Parameters:														-->
        <!-- 	url			- The MySQL Database URL							--> 
        <!-- 	user		- The MySQL Databse user							-->
        <!-- 	password	- The MySQL user's password							-->
        <!-- 	autoInstall	- Should we allow the database to install itself	--> 
        <!-- 				  automatically?									-->
       	<!-- 	schemaFile	- The path to the database creation script			-->
        <!-- 
		<resource name="glidein/Database" 
				  type="edu.usc.glidein.service.db.mysql.MySQLDatabase">
            <resourceParams>
                <parameter>
                    <name>factory</name>
                    <value>org.globus.wsrf.jndi.BeanFactory</value>
                </parameter>
                <parameter>
                    <name>url</name>
                    <value>jdbc:mysql://localhost:3306/glidein</value>
                </parameter>
                <parameter>
                	<name>user</name>
                	<value>juve</value>
                </parameter>
                <parameter>
                	<name>password</name>
                	<value>Mini14</value>
                </parameter>
                <parameter>
                	<name>autoInstall</name>
                	<value>true</value>
                </parameter>
                <parameter>
                	<name>schemaFile</name>
                	<value>share/schema/glidein/mysql.sql</value>
                </parameter>
            </resourceParams>
        </resource>
        -->
        <!-- Condor configuration											 -->
        <!-- 																 -->
        <!-- Parameters:													 -->
        <!-- 	factory			- BeanFactory used to create object			 -->
        <!-- 	condorHome		- Directory where condor is installed		 -->
        <!-- 	codnorConfig	- Path to the condor configuration file		 -->
        <resource name="glidein/Condor" 
        		  type="edu.usc.glidein.service.exec.Condor">
            <resourceParams>
                <parameter>
                    <name>factory</name>
                    <value>org.globus.wsrf.jndi.BeanFactory</value>
                </parameter>
                <parameter>
                    <name>condorHome</name>
                    <value>/opt/condor/7.0.0</value>
                </parameter>
                <parameter>
                	<name>condorConfig</name>
                	<value>/etc/condor/condor_config</value>
                </parameter>
            </resourceParams>
        </resource>
        <!-- Glidein service configuration									 -->
        <!-- 																 -->
        <!-- Parameters:													 -->
        <!-- 	factory				- BeanFactory used to instantiate object -->
        <!-- 	install				- Path to the site install shell script	 -->
        <!-- 	uninstall			- Path to the site uninstall shell script-->
        <!-- 	run					- Path to the glidein run shell script	 -->
        <!-- 	glideinServerURLs	- List of URLs to retrieve glidein 		 -->
        <!-- 						  binaries from (comma-separated list)	 -->
        <!-- 	glideinCondorConfig	- Default glidein config file			 -->
        <!-- 	workingDirectory	- Directory to store working files. URLs -->
        <!-- 						  are considered in the order specified  -->
        <resource name="glidein/ServiceConfiguration" 
        		  type="edu.usc.glidein.service.ServiceConfiguration">
            <resourceParams>
                <parameter>
                    <name>factory</name>
                    <value>org.globus.wsrf.jndi.BeanFactory</value>
                </parameter>
                <parameter>
                    <name>install</name>
                    <value>share/glidein_service/glidein_install</value>
                </parameter>
                <parameter>
                	<name>uninstall</name>
                	<value>share/glidein_service/glidein_uninstall</value>
                </parameter>
                <parameter>
                	<name>run</name>
                	<value>share/glidein_service/glidein_run</value>
                </parameter>
                <parameter>
                	<name>glideinServerURLs</name>
                	<value>http://scecit02.usc.edu/glidein/binaries,http://www.cs.wisc.edu/condor/glidein/binaries,gsiftp://gridftp.cs.wisc.edu/p/condor/public/binaries/glidein</value>
                </parameter>
                <parameter>
                	<name>glideinCondorConfig</name>
                	<value>etc/glidein_service/glidein_condor_config</value>
                </parameter>
                <parameter>
                	<name>workingDirectory</name>
                	<value>var/glidein_service</value>
                </parameter>
            </resourceParams>
        </resource>
        <!-- Event queue													 -->
        <!-- 																 -->
        <!-- Parameters:													 -->
        <!-- 	numThreads	- Number of worker threads to process events	 -->
        <resource name="glidein/EventQueue" 
        		  type="edu.usc.glidein.service.state.EventQueue">
            <resourceParams>
                <parameter>
                    <name>factory</name>
                    <value>org.globus.wsrf.jndi.BeanFactory</value>
                </parameter>
                <parameter>
                	<name>numThreads</name>
                	<value>1</value>
                </parameter>
            </resourceParams>
        </resource>
	</global>

	<!-- GlideinService -->
	<service name="glidein/GlideinService">
		<resource name="home" 
				  type="edu.usc.glidein.service.GlideinResourceHome">
			<resourceParams>
				<parameter>
					<name>sweeperDelay</name>
					<value>60000</value>
				</parameter>
				<parameter>
					<name>resourceClass</name>
					<value>edu.usc.glidein.service.GlideinResource</value>
				</parameter>
				<parameter>
					<name>resourceKeyType</name>
					<value>java.lang.Integer</value>
				</parameter>
				<parameter>
					<name>resourceKeyName</name>
					<value>{http://www.usc.edu/glidein/GlideinService}GlideinServiceKey</value>
				</parameter>
				<parameter>
					<name>factory</name>
					<value>org.globus.wsrf.jndi.BeanFactory</value>
				</parameter>
			</resourceParams>
		</resource>
	</service>
	
	<!-- GlideinFactoryService -->
	<service name="glidein/GlideinFactoryService">
		<resourceLink name="home" 
			target="java:comp/env/services/glidein/GlideinService/home"/>
	</service>
	
	<!-- SiteService -->
	<service name="glidein/SiteService">
		<resource name="home" 
				  type="edu.usc.glidein.service.SiteResourceHome">
			<resourceParams>
				<parameter>
					<name>sweeperDelay</name>
					<value>60000</value>
				</parameter>
				<parameter>
					<name>resourceClass</name>
					<value>edu.usc.glidein.service.SiteResource</value>
				</parameter>
				<parameter>
					<name>resourceKeyType</name>
					<value>java.lang.Integer</value>
				</parameter>
				<parameter>
					<name>resourceKeyName</name>
					<value>{http://www.usc.edu/glidein/SiteService}SiteServiceKey</value>
				</parameter>
				<parameter>
					<name>factory</name>
					<value>org.globus.wsrf.jndi.BeanFactory</value>
				</parameter>
			</resourceParams>
		</resource>
	</service>
	
	<!-- SiteFactoryService -->
	<service name="glidein/SiteFactoryService">
		<resourceLink name="home" 
			target="java:comp/env/services/glidein/SiteService/home"/>
	</service>

</jndiConfig>